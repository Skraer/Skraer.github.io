var quiz=document.querySelector("#quiz"),closeBtn=document.querySelector(".quiz__close"),roomsItems=document.querySelectorAll(".quiz__rooms-item"),roomsImgs=document.querySelectorAll(".quiz__rooms-img"),roomsRadio=document.querySelectorAll('input[name="rooms"]'),regionRadio=document.querySelectorAll(".quiz__region-radio"),regionItems=document.querySelectorAll(".quiz__region-item"),renovatedRadio=document.querySelectorAll(".quiz__renovated-radio"),renovatedItems=document.querySelectorAll(".quiz__renovated-item"),btnsCallQuiz=document.querySelectorAll("[data-call-popup]"),tooltipElem=document.querySelector(".quiz__tooltip"),contents=document.querySelectorAll(".quiz__content"),main=document.querySelector(".quiz__main"),sidebar=document.querySelector(".quiz__sidebar"),confirmWindow=document.querySelector(".quiz__confirm"),successWindow=document.querySelector(".quiz__success"),submitBtn=document.querySelector(".quiz__confirm-btn"),areaInput=document.querySelector(".quiz__area-input input"),floorInput=document.querySelector(".quiz__floor-input input");submitBtn.addEventListener("click",(function(e){e.preventDefault(),confirmWindow.classList.add("hidden"),successWindow.classList.remove("hidden"),document.querySelector(".quiz__inner").classList.add("autoheight")}));var controls={progressBar:document.querySelector(".quiz__progress"),progressItems:document.querySelectorAll(".quiz__progress-item"),btnPrev:document.querySelector(".quiz__btn--prev"),btnNext:document.querySelector(".quiz__btn--next"),currentPage:0},tooltips=["Выберите подходящий ответ, нажав на него","Пожалуйста, воспользуйтесь ползунком для этого. Если не знаете точно - укажите примерную площадь. Точную площадь вы можете узнать в паспорте квартиры или в платёжке ЖКХ","Выберите подходящий ответ, нажав на него","Пожалуйста, воспользуйтесь ползунком для этого","Выберите подходящий ответ, нажав на него"],quizData={};function showPopup(e){document.querySelector(e).classList.add("shown"),document.querySelector("#main").classList.add("blured")}function hidePopup(e){document.querySelector(e).classList.remove("shown"),document.querySelector("#main").classList.remove("blured")}function roomsImgBg(){for(var e=0;e<roomsItems.length;e++){var t=roomsImgs[e].src;roomsItems[e].style.backgroundImage="url("+t+")"}}function radioHandler(e,t,o=null){for(var n=0;n<e.length;n++){var r=a.bind(null,n),i=l.bind(null,n);e[n].addEventListener("click",r),e[n].addEventListener("change",i)}function l(t){for(var n=0;n<e.length;n++)e[n].classList.remove("checked");e[t].classList.add("checked"),o&&o()}function a(e){t[e].checked=!0,l(e)}}function quizBtnsHandler(){0===controls.currentPage?controls.btnPrev.setAttribute("disabled","disabled"):controls.btnPrev.removeAttribute("disabled"),window.innerWidth>480&&(controls.currentPage===contents.length-1?controls.btnNext.textContent="последний шаг":controls.btnNext.textContent="далее")}function nextSlide(){var e=contents[controls.currentPage].querySelectorAll('input[type="radio"]'),t=contents[controls.currentPage].querySelector(".quiz__title"),o=!1;if(e.length>0)for(var n=0;n<e.length;n++)e[n].checked&&(o=!0);else o=!0;controls.currentPage<contents.length-1&&o?(t.classList.remove("not-allow"),contents[controls.currentPage].classList.add("hidden"),contents[++controls.currentPage].classList.remove("hidden")):controls.currentPage===contents.length-1&&o?(t.classList.remove("not-allow"),showFinalForm()):(t.classList.remove("not-allow"),t.classList.add("not-allow"),t.onanimationend=function(){t.classList.remove("not-allow")}),quizBtnsHandler(),progressBarHandler(),tooltipsHandler(),quizHandleValues()}function prevSlide(){controls.currentPage>0&&(contents[controls.currentPage].classList.add("hidden"),contents[--controls.currentPage].classList.remove("hidden")),quizBtnsHandler(),progressBarHandler(),tooltipsHandler()}function progressBarHandler(){for(var e=0;e<controls.progressItems.length;e++)controls.progressItems[e].classList.remove("checked");for(e=0;e<controls.currentPage+1;e++)controls.progressItems[e].classList.add("checked")}function tooltipsHandler(){var e=tooltips[controls.currentPage].split(" "),t="";if(window.innerWidth<767)for(var o=document.createElement("span"),n=0;n<e.length;n++){if(t+=e[n]+" ",tooltipElem.innerHTML="",o.textContent=t,tooltipElem.appendChild(o),o.getClientRects().length>=3){var r=e.slice(0,n-1).join(" ")+" ...";o.textContent=r,tooltipElem.appendChild(o),tooltipElem.classList.add("closed"),tooltipElem.setAttribute("data-cutted-text",r);break}tooltipElem.classList.remove("closed"),tooltipElem.classList.remove("opened"),tooltipElem.removeAttribute("data-cutted-text")}else tooltipElem.textContent=tooltips[controls.currentPage]}function showFinalForm(){for(var e=0;e<contents.length;e++)contents[e].classList.add("hidden");confirmWindow.classList.remove("hidden"),main.classList.add("hidden"),sidebar.classList.add("hidden")}function handleRadioValue(e){quizData[e.name]=e.value}function quizHandleValues(){for(var e=null,t=null,o=null,n=0;n<roomsRadio.length;n++)roomsRadio[n].checked&&(e=roomsRadio[n].value);for(n=0;n<regionRadio.length;n++)regionRadio[n].checked&&(t=regionRadio[n].value);for(n=0;n<renovatedRadio.length;n++)renovatedRadio[n].checked&&(o=renovatedRadio[n].value);quizData.rooms=e,quizData.region=t,quizData.renovated=o,quizData.area=quizAreaRange.noUiSlider.get(),quizData.floor=quizFloorRange.noUiSlider.get(),console.log(quizData)}function openOrCloseTooltip(){var e=parseInt(sidebar.getBoundingClientRect().height)+"px";tooltipElem.classList.contains("closed")?(sidebar.style.height=e,tooltipElem.classList.remove("closed"),tooltipElem.classList.add("opened"),tooltipElem.firstElementChild.textContent=tooltips[controls.currentPage]):tooltipElem.classList.contains("opened")&&(sidebar.style.height="",tooltipElem.classList.remove("opened"),tooltipElem.classList.add("closed"),tooltipElem.firstElementChild.textContent=tooltipElem.getAttribute("data-cutted-text"))}function sendForm(e){}for(var i=0;i<btnsCallQuiz.length;i++){var show=showPopup.bind(null,btnsCallQuiz[i].getAttribute("data-call-popup"));btnsCallQuiz[i].addEventListener("click",show)}quiz.addEventListener("mousedown",(function(e){e.target!==quiz&&e.target!==closeBtn||hidePopup("#"+quiz.id)})),tooltipElem.addEventListener("click",openOrCloseTooltip),radioHandler(roomsItems,roomsRadio,nextSlide),radioHandler(regionItems,regionRadio,nextSlide),radioHandler(renovatedItems,renovatedRadio,nextSlide),roomsImgBg(),controls.btnNext.addEventListener("click",nextSlide),controls.btnPrev.addEventListener("click",prevSlide),quizBtnsHandler(),progressBarHandler(),tooltipsHandler();var quizAreaRange=document.querySelector(".quiz__area-range"),quizFloorRange=document.querySelector(".quiz__floor-range");document.querySelector("#nouisliderScript").onload=function(){noUiSlider.create(quizAreaRange,{start:25,connect:"lower",tooltips:!0,format:{to:function(e){return parseInt(e)},from:function(e){return parseInt(e)}},step:1,range:{min:10,max:120}}),noUiSlider.create(quizFloorRange,{start:5,connect:"lower",tooltips:!0,format:{to:function(e){return parseInt(e)},from:function(e){return parseInt(e)}},step:1,range:{min:1,max:20}}),quizAreaRange.noUiSlider.on("update",(function(){areaInput.value=quizAreaRange.noUiSlider.get()})),quizFloorRange.noUiSlider.on("update",(function(){floorInput.value=quizFloorRange.noUiSlider.get()})),areaInput.onchange=function(){quizAreaRange.noUiSlider.set(+areaInput.value)},floorInput.onchange=function(){quizFloorRange.noUiSlider.set(+floorInput.value)}},document.querySelector("#imaskScript").onload=function(){var e=document.querySelector(".quiz__confirm-input");IMask(e,{mask:"+{7}(000)000-00-00",lazy:!1,placeholderChar:"  "})};
//# sourceMappingURL=maps/main.min.js.map
