"use strict";!function(){var e=new Splide(".splide-problems",{loop:!1,perPage:2,arrows:!1,gap:20,padding:20,drag:!0,swipeDistanceThreshold:10,pagination:!0,breakpoints:{2560:{pagination:!1,drag:!1,perPage:5},1070:{perPage:4},860:{perPage:3},767:{gap:12,fixedWidth:"210px"},479:{focus:!0,fixedWidth:"210px"}}});e.on("drag",(function(){for(var e=document.querySelectorAll(".splide-problems .problems-card"),t=0;t<e.length;t++)e[t].classList.add("is-shadow")})),e.on("dragged",(function(){for(var e=document.querySelectorAll(".splide-problems .problems-card"),t=0;t<e.length;t++)n(e[t]);function n(e){setTimeout((function(){e.classList.remove("is-shadow")}),500)}}));var t=new Splide(".splide-results",{loop:!1,perPage:2,perMove:2,pagination:!0,arrows:!0,gap:30,padding:20});document.documentElement.offsetWidth<768?t.destroy():(t.on("drag",(function(){for(var e=document.querySelectorAll(".splide-results .results-card"),t=0;t<e.length;t++)e[t].classList.add("is-shadow")})),t.on("dragged",(function(){for(var e=document.querySelectorAll(".splide-results .results-card"),t=0;t<e.length;t++)n(e[t]);function n(e){setTimeout((function(){e.classList.remove("is-shadow")}),500)}})));var n=new Splide(".splide-themes",{loop:!1,perPage:5,pagination:!0,arrows:!0,gap:20,padding:20,breakpoints:{1023:{perPage:4},767:{perPage:3},479:{perPage:2,fixedWidth:"110px",gap:10}}});n.on("drag",(function(){for(var e=document.querySelectorAll(".splide-themes .themes-card"),t=0;t<e.length;t++)e[t].classList.add("is-shadow")})),n.on("dragged",(function(){for(var e=document.querySelectorAll(".splide-themes .themes-card"),t=0;t<e.length;t++)n(e[t]);function n(e){setTimeout((function(){e.classList.remove("is-shadow")}),500)}}));var s=new Splide(".splide-reviews",{loop:!1,perPage:3,perMove:1,clones:0,pagination:!0,arrows:!0,gap:22,padding:20,breakpoints:{1023:{perPage:2},650:{perPage:1,autoHeight:!0}}});s.on("drag",(function(){for(var e=document.querySelectorAll(".splide-reviews .reviews-card"),t=0;t<e.length;t++)e[t].classList.add("is-shadow")})),s.on("dragged",(function(){for(var e=document.querySelectorAll(".splide-reviews .reviews-card"),t=0;t<e.length;t++)n(e[t]);function n(e){setTimeout((function(){e.classList.remove("is-shadow")}),500)}}));var r=new Splide(".splide-news",{loop:!1,perPage:1,perMove:1,pagination:!0,arrows:!0,breakpoints:{600:{perPage:2},450:{perPage:1}}});e.mount(),t.mount(),n.mount(),s.mount(),r.mount();var o=document.querySelector("#header"),l=document.querySelector(".wrapper"),c=document.querySelector("#burger"),a=document.querySelector(".header__bottom"),i=document.querySelectorAll(".header .menu__link"),d=document.querySelectorAll(".footer__nav-link"),u={cards:document.querySelectorAll(".problems-card"),labels:document.querySelectorAll(".problems-card__cb"),checkboxes:document.querySelectorAll(".problems-card__cb input"),btn:document.querySelector("#problemsBtn"),info:document.querySelector("#problemsInfo"),output:document.querySelector("#problemsCount"),title:document.querySelector(".problems__title"),outputString:" проблем",checkedCount:0},p={questionTitles:document.querySelectorAll(".quiz__question"),count:document.querySelector(".quiz__count"),contents:document.querySelectorAll(".quiz__answers"),answers:document.querySelectorAll(".quiz__answer"),radio:document.querySelectorAll(".quiz__answer input"),labels:document.querySelectorAll(".quiz__radio-label"),btn:document.querySelector(".quiz__btn"),request:document.querySelector(".quiz .request"),page:0},m={checkboxes:document.querySelectorAll(".request__cb"),labels:document.querySelectorAll(".request__policy-label")},v={btn:document.querySelector("#moreResults"),cards:document.querySelectorAll(".results-card"),isHidden:!1,visibleCount:2,cardTexts:[]},g={items:document.querySelectorAll(".news-grid__item"),sliderList:document.querySelector(".news__slider .news__list")},h=document.querySelectorAll("[data-call-popup]"),f=document.querySelector("#popup");function L(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=parseInt(o.getBoundingClientRect().height),n=e?t+100+"px":t+"px";l.style.paddingTop=n}function b(){document.documentElement.scrollTop>99?(o.classList.add("fixed"),L(!0)):(o.classList.remove("fixed"),L())}function q(e){var t=e.getAttribute("href").substr(1);event.preventDefault(),document.getElementById(t).scrollIntoView({block:"start",behavior:"smooth"}),c.classList.remove("active"),a.classList.remove("active")}function y(e){u.checkboxes[e].checked?(u.checkedCount++,u.labels[e].classList.add(_())):(u.checkedCount--,u.labels[e].classList.remove(_())),function(){switch(u.checkedCount){case 1:u.outputString=" проблема.";break;case 2:case 3:case 4:u.outputString=" проблемы.";break;default:u.outputString=" проблем."}u.output.textContent=u.checkedCount+u.outputString}()}function _(){var e;if(u.checkedCount<3){for(var t=0;t<u.labels.length;t++)u.labels[t].classList.contains("done")&&(u.labels[t].classList.remove("done"),u.labels[t].classList.add("active"));e="active",k(!1),S("default")}else if(u.checkedCount>=3){for(t=0;t<u.labels.length;t++)u.labels[t].classList.contains("active")&&(u.labels[t].classList.remove("active"),u.labels[t].classList.add("done"));e="done",k(!0),S("ready")}return u.checkedCount>0?u.output.parentElement.classList.add("not-zero"):u.output.parentElement.classList.remove("not-zero"),e}function S(e){"default"===e?(u.title.innerHTML=u.defaultTitleContent,u.title.classList.remove("ready")):"ready"===e&&(u.title.innerHTML=u.readyTitleContent,u.title.classList.add("ready"))}function k(e){e?(u.info.classList.add("hidden"),u.btn.classList.remove("hidden"),u.title.classList.add("ready")):(u.btn.classList.add("hidden"),u.info.classList.remove("hidden"),u.title.classList.remove("is-ready"))}function w(e,t){e.checked?t.classList.add("checked"):t.classList.remove("checked")}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(v.isHidden)for(var t=0;t<v.cards.length;t++)v.cards[t].classList.remove("hidden"),v.btn.textContent="скрыть";else for(t=e;t<v.cards.length;t++)v.cards[t].classList.add("hidden"),v.btn.textContent="показать еще";v.isHidden=!v.isHidden}function C(e){var t=v.cards[e].querySelector(".results-card__text");T(v.cardTexts[e],t),v.cards[e].classList.remove("closed"),v.cards[e].classList.add("opened")}function A(e){var t=v.cards[e].querySelector(".results-card__text"),n=t.getAttribute("data-cutted-length");T(v.cardTexts[e].split(" ").slice(0,n-2).join(" ")+" ...",t),v.cards[e].classList.remove("opened"),v.cards[e].classList.add("closed")}function T(e,t){var n=document.createElement("span");n.textContent=e,t.innerHTML="",t.appendChild(n)}function E(e){var t=v.cards[e].querySelector(".results-card__text"),n=function(e,t,n){for(var s=v.cardTexts[t],r=s.split(" "),o="",l=document.createElement("span"),c=0;c<r.length;c++)if(o+=r[c]+" ",n.innerHTML="",l.textContent=o,n.appendChild(l),l.getClientRects().length>=e)return l.textContent=s,n.innerHTML="",n.appendChild(l),{isMore:!0,length:c};return{isMore:!1,length:c}}(5,e,t);n.isMore&&(t.setAttribute("data-cutted-length",n.length),v.cards[e].classList.add("closed"))}function P(e){v.cards[e].classList.contains("closed")?C(e):v.cards[e].classList.contains("opened")&&A(e)}function M(e){e.classList.contains("hidden")?(e.classList.remove("hidden"),document.body.classList.add("lock")):(e.classList.add("hidden"),document.body.classList.remove("lock"))}function z(e){event.target!==u.labels[e]&&u.checkboxes[e].click()}function H(){W(),p.questionTitles[p.page].classList.add("active"),p.contents[p.page].classList.add("active"),p.count.textContent=p.page+1+"/"+p.total}function W(){for(var e=0;e<p.contents.length;e++)p.questionTitles[e].classList.remove("active"),p.contents[e].classList.remove("active")}function I(){for(var e=document.querySelectorAll('.quiz__answers.active input[type="radio"]'),t=0;t<e.length;t++)if(e[t].checked)return!0;return!1}L(),function(e,t){for(var n=0;n<e.length;n++){var s=l.bind(null,n),r=o.bind(null,n);e[n].addEventListener("click",s),e[n].addEventListener("change",r)}function o(t){for(var n=0;n<e.length;n++)e[n].classList.remove("checked");e[t].classList.add("checked")}function l(e){t[e].checked=!0,o(e)}}(p.answers,p.radio),function(){p.total=p.contents.length+1,p.request.classList.remove("active");for(var e=0;e<p.questionTitles.length;e++)p.questionTitles[e].textContent=e+1+" "+p.questionTitles[e].textContent;H()}(),p.btn.addEventListener("click",(function(){p.page<p.total-2&&I()?(p.page++,H()):p.page===p.total-2&&I()?(W(),p.count.textContent=p.total+"/"+p.total,p.btn.classList.add("hidden"),p.request.classList.add("active")):alert("Выберите один из вариантов ответа")})),window.addEventListener("scroll",b),window.addEventListener("resize",b),c.addEventListener("click",(function(){c.classList.contains("active")?(c.classList.remove("active"),a.classList.remove("active")):(c.classList.add("active"),a.classList.add("active"))}));for(var B=0;B<i.length;B++){(G=i[B]).addEventListener("click",q.bind(null,G))}for(B=0;B<d.length;B++){(G=d[B]).addEventListener("click",q.bind(null,G))}u.defaultTitleContent=u.title.innerHTML,u.readyTitleContent=u.title.getAttribute("data-ready-text");for(B=0;B<u.cards.length;B++){var R=y.bind(null,B);u.checkboxes[B].addEventListener("change",R);var D=z.bind(null,B);u.cards[B].addEventListener("click",D)}for(B=0;B<m.checkboxes.length;B++){R=w.bind(null,m.checkboxes[B],m.labels[B]);m.checkboxes[B].addEventListener("click",R)}for(B=0;B<v.cards.length;B++){var j=v.cards[B].querySelector(".results-card__text");v.cardTexts.push(j.textContent)}if(document.documentElement.offsetWidth<768){for(B=0;B<v.cards.length;B++)if(E(B),v.cards[B].querySelector(".results-card__text").hasAttribute("data-cutted-length")){var V=P.bind(null,B);v.cards[B].addEventListener("click",V),A(B)}v.btn.addEventListener("click",x.bind(null,v.visibleCount)),x(2)}if(document.documentElement.offsetWidth<=600){for(B=-1;B<r.length;B++)r.remove(B);for(B=0;B<g.items.length;B++){(G=g.items[B]).classList.remove("news-grid__item--left-bottom"),G.classList.remove("news-grid__item--large"),G.classList.remove("news-grid__item--condensed");var F='<li class="splide__slide news__slide">'+G.outerHTML+"</li>";r.add(F,-1)}}f.addEventListener("mousedown",function(e){(event.target.classList.contains("popup")||event.target.classList.contains("popup__close"))&&M(e)}.bind(null,f));for(B=0;B<h.length;B++){var G=document.querySelector(h[B].getAttribute("data-call-popup"));R=M.bind(null,G);h[B].addEventListener("click",R)}}();
//# sourceMappingURL=maps/main.min.js.map
