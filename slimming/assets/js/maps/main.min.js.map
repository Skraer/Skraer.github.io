{"version":3,"names":[],"mappings":"","sources":["main.js"],"sourcesContent":["// var problemsOutput = document.querySelector('#problemsCount');\r\n// var problemsSlider = document.querySelector('.problems__list');\r\nvar problemsSlider = new Splide('.splide-problems', {\r\n    loop: false,\r\n    perPage: 2,\r\n    arrows: false,\r\n    gap: 20,\r\n    padding: 20,\r\n    drag: true,\r\n    swipeDistanceThreshold: 10,\r\n    pagination: true,\r\n    breakpoints: {\r\n        2560: {\r\n            pagination: false,\r\n            drag: false,\r\n            perPage: 5,\r\n        },\r\n        1070: {\r\n            perPage: 4,\r\n        },\r\n        860: {\r\n            perPage: 3,\r\n        },\r\n        767: {\r\n            gap: 12,\r\n            fixedWidth: '210px',\r\n        },\r\n        480: {\r\n            focus: true,\r\n            fixedWidth: '210px',\r\n        }\r\n        \r\n    }\r\n});\r\nproblemsSlider.on('drag', function() {\r\n    var cards = document.querySelectorAll('.splide-problems .problems-card');\r\n    for (var i = 0; i < cards.length; i++) {\r\n        cards[i].classList.add('is-shadow');\r\n    }\r\n});\r\nproblemsSlider.on('dragged', function() {\r\n    var cards = document.querySelectorAll('.splide-problems .problems-card');\r\n    for (var i = 0; i < cards.length; i++) {\r\n        removeShadow(cards[i]);\r\n    }\r\n    function removeShadow(elem) {\r\n        setTimeout(function() {\r\n            elem.classList.remove('is-shadow');\r\n        }, 500);\r\n    }\r\n});\r\nvar resultsSlider = new Splide('.splide-results', {\r\n    loop: false,\r\n    perPage: 2,\r\n    perMove: 2,\r\n    pagination: true,\r\n    arrows: true,\r\n    gap: 30,\r\n    padding: 20,\r\n});\r\nif (window.innerWidth < 768) {\r\n    resultsSlider.destroy();\r\n} else {\r\n    resultsSlider.on('drag', function() {\r\n        var cards = document.querySelectorAll('.splide-results .results-card');\r\n        for (var i = 0; i < cards.length; i++) {\r\n            cards[i].classList.add('is-shadow');\r\n        }\r\n    });\r\n    resultsSlider.on('dragged', function() {\r\n        var cards = document.querySelectorAll('.splide-results .results-card');\r\n        for (var i = 0; i < cards.length; i++) {\r\n            removeShadow(cards[i]);\r\n        }\r\n        function removeShadow(elem) {\r\n            setTimeout(function() {\r\n                elem.classList.remove('is-shadow');\r\n            }, 500);\r\n        }\r\n    });\r\n}\r\nvar themesSlider = new Splide('.splide-themes', {\r\n    loop: false,\r\n    perPage: 5,\r\n    // perMove: 2,\r\n    pagination: true,\r\n    arrows: true,\r\n    gap: 20,\r\n    padding: 20,\r\n\r\n});\r\nthemesSlider.on('drag', function() {\r\n    var cards = document.querySelectorAll('.splide-themes .themes-card');\r\n    for (var i = 0; i < cards.length; i++) {\r\n        cards[i].classList.add('is-shadow');\r\n    }\r\n});\r\nthemesSlider.on('dragged', function() {\r\n    var cards = document.querySelectorAll('.splide-themes .themes-card');\r\n    for (var i = 0; i < cards.length; i++) {\r\n        removeShadow(cards[i]);\r\n    }\r\n    function removeShadow(elem) {\r\n        setTimeout(function() {\r\n            elem.classList.remove('is-shadow');\r\n        }, 500);\r\n    }\r\n});\r\nvar reviewsSlider = new Splide('.splide-reviews', {\r\n    loop: false,\r\n    perPage: 3,\r\n    perMove: 1,\r\n    clones: 0,\r\n    pagination: true,\r\n    arrows: true,\r\n    gap: 22,\r\n    padding: 20,\r\n});\r\nreviewsSlider.on('drag', function() {\r\n    var cards = document.querySelectorAll('.splide-reviews .reviews-card');\r\n    for (var i = 0; i < cards.length; i++) {\r\n        cards[i].classList.add('is-shadow');\r\n    }\r\n});\r\nreviewsSlider.on('dragged', function() {\r\n    var cards = document.querySelectorAll('.splide-reviews .reviews-card');\r\n    for (var i = 0; i < cards.length; i++) {\r\n        removeShadow(cards[i]);\r\n    }\r\n    function removeShadow(elem) {\r\n        setTimeout(function() {\r\n            elem.classList.remove('is-shadow');\r\n        }, 500);\r\n    }\r\n});\r\nvar newsSlider = new Splide('.splide-news', {\r\n    loop: false,\r\n    perPage: 1,\r\n    perMove: 1,\r\n    pagination: true,\r\n    arrows: true,\r\n    // gap: 22,\r\n});\r\nproblemsSlider.mount();\r\nresultsSlider.mount();\r\nthemesSlider.mount();\r\nreviewsSlider.mount();\r\nnewsSlider.mount();\r\n\r\n\r\n\r\nvar burger = document.querySelector('#burger');\r\nvar headerMenu = document.querySelector('.header__bottom');\r\nburger.addEventListener('click', function() {\r\n    if (burger.classList.contains('active')) {\r\n        hideMenu();\r\n    } else {\r\n        showMenu();\r\n    }\r\n});\r\nfunction showMenu() {\r\n    burger.classList.add('active');\r\n    headerMenu.classList.add('active');\r\n}\r\nfunction hideMenu() {\r\n    burger.classList.remove('active');\r\n    headerMenu.classList.remove('active');\r\n}\r\n\r\nvar headerMenuItems = document.querySelectorAll('.header .menu__link');\r\nvar footerMenuItems = document.querySelectorAll('.footer__nav-link');\r\nfor (var i = 0; i < headerMenuItems.length; i++) {\r\n    var elem = headerMenuItems[i];\r\n    var handler = scrollHandler.bind(null, elem);\r\n    elem.addEventListener('click', handler);\r\n}\r\nfor (var i = 0; i < footerMenuItems.length; i++) {\r\n    var elem = footerMenuItems[i];\r\n    var handler = scrollHandler.bind(null, elem);\r\n    elem.addEventListener('click', handler);\r\n}\r\n\r\nfunction scrollHandler(elem) {\r\n    var href = elem.getAttribute('href').substr(1);\r\n    event.preventDefault();\r\n    document.getElementById(href).scrollIntoView({block: \"start\", behavior: \"smooth\"});\r\n}\r\n\r\nvar problems = {\r\n    cards: document.querySelectorAll('.problems-card'),\r\n    labels: document.querySelectorAll('.problems-card__cb'),\r\n    checkboxes: document.querySelectorAll('.problems-card__cb input'),\r\n    btn: document.querySelector('#problemsBtn'),\r\n    info: document.querySelector('#problemsInfo'),\r\n    output: document.querySelector('#problemsCount'),\r\n    title: document.querySelector('.problems__title'),\r\n    outputString: ' проблем',\r\n    checkedCount: 0,\r\n};\r\nproblems.defaultTitleContent = problems.title.innerHTML;\r\nproblems.readyTitleContent = problems.title.getAttribute('data-ready-text');\r\n\r\nfor (var i = 0; i < problems.cards.length; i++) {\r\n    var handler = problemsHandler.bind(null, i);\r\n    problems.checkboxes[i].addEventListener('change', handler);\r\n    var selectCb = selectCheckbox.bind(null, i);\r\n    problems.cards[i].addEventListener('click', selectCb);\r\n}\r\nfunction selectCheckbox(ind) {\r\n    if (event.target !== problems.labels[ind]) {\r\n        problems.checkboxes[ind].click();\r\n    }\r\n}\r\nfunction problemsHandler(ind) {\r\n    if (problems.checkboxes[ind].checked) {\r\n        problems.checkedCount++;\r\n        problems.labels[ind].classList.add(getCheckedProblemsClassName());\r\n    } else {\r\n        problems.checkedCount--;\r\n        problems.labels[ind].classList.remove(getCheckedProblemsClassName());\r\n    }\r\n    showProblemsCount();\r\n}\r\nfunction getCheckedProblemsClassName() {\r\n    var className;\r\n    if (problems.checkedCount < 3) {\r\n        for (var j = 0; j < problems.labels.length; j++) {\r\n            if (problems.labels[j].classList.contains('done')) {\r\n                problems.labels[j].classList.remove('done');\r\n                problems.labels[j].classList.add('active');\r\n            }\r\n        }\r\n        className = 'active';\r\n        problemsChangeState(false);\r\n        toggleTitleContent('default');\r\n    } else if (problems.checkedCount >= 3) {\r\n        for (var j = 0; j < problems.labels.length; j++) {\r\n            if (problems.labels[j].classList.contains('active')) {\r\n                problems.labels[j].classList.remove('active');\r\n                problems.labels[j].classList.add('done');\r\n            }\r\n        }\r\n        className = 'done';\r\n        problemsChangeState(true);\r\n        toggleTitleContent('ready');\r\n    } \r\n    toggleProblemsOutputClassName();\r\n    return className;\r\n}\r\nfunction toggleTitleContent(state) {\r\n    if (state === 'default') {\r\n        problems.title.innerHTML = problems.defaultTitleContent;\r\n        problems.title.classList.remove('ready');\r\n    } else if (state === 'ready') {\r\n        problems.title.innerHTML = problems.readyTitleContent;\r\n        problems.title.classList.add('ready');\r\n    }\r\n}\r\nfunction showProblemsCount() {\r\n    switch (problems.checkedCount) {\r\n        case 1:\r\n            problems.outputString = ' проблема.';\r\n            break;\r\n        case 2:\r\n        case 3:\r\n        case 4:\r\n            problems.outputString = ' проблемы.';\r\n            break;\r\n        default:\r\n            problems.outputString = ' проблем.';\r\n            break;\r\n    }\r\n    problems.output.textContent = problems.checkedCount + problems.outputString;\r\n}\r\nfunction toggleProblemsOutputClassName() {\r\n    if (problems.checkedCount > 0) {\r\n        problems.output.parentElement.classList.add('not-zero');\r\n    } else {\r\n        problems.output.parentElement.classList.remove('not-zero');\r\n    }\r\n}\r\nfunction problemsChangeState(isReady) {\r\n    if (isReady) {\r\n        problems.info.classList.add('hidden');\r\n        problems.btn.classList.remove('hidden');\r\n        problems.title.classList.add('ready');\r\n    } else {\r\n        problems.btn.classList.add('hidden');\r\n        problems.info.classList.remove('hidden');\r\n        problems.title.classList.remove('is-ready');\r\n    }\r\n}\r\n\r\nvar quiz = {\r\n    answers: document.querySelectorAll('.quiz__answer'),\r\n    radio: document.querySelectorAll('.quiz__answer input'),\r\n    labels: document.querySelectorAll('.quiz__radio-label'),\r\n};\r\nradioHandler(quiz.answers, quiz.radio);\r\n\r\nfunction radioHandler(itemList, radioList) {\r\n    for (var i = 0; i < itemList.length; i++) {\r\n        var select = selectRadio.bind(null, i);\r\n        var handler = selectItem.bind(null, i);\r\n        itemList[i].addEventListener('click', select);\r\n        itemList[i].addEventListener('change', handler);\r\n    }\r\n    function selectItem(ind) {\r\n        for (var j = 0; j < itemList.length; j++) {\r\n            itemList[j].classList.remove('checked');\r\n        }\r\n        itemList[ind].classList.add('checked');\r\n    }\r\n    function selectRadio(ind) {\r\n        radioList[ind].checked = true;\r\n        selectItem(ind);\r\n    }\r\n}\r\n\r\nvar request = {\r\n    checkbox: document.querySelector('#request .request__cb'),\r\n    label: document.querySelector('#request .request__policy-label'),\r\n};\r\nrequest.checkbox.addEventListener('change', function() {\r\n    if (request.checkbox.checked) {\r\n        request.label.classList.add('checked');\r\n    } else {\r\n        request.label.classList.remove('checked');\r\n    }\r\n});\r\n\r\n// var btnResultsMore = document.querySelector('#moreResults');\r\n// var resultsCards = document.querySelectorAll('.results-card');\r\nvar results = {\r\n    btn: document.querySelector('#moreResults'),\r\n    cards: document.querySelectorAll('.results-card'),\r\n    isHidden: false,\r\n    visibleCount: 2,\r\n};\r\nfunction showOrHideMoreResults(visibleCount = 0) {\r\n    if (results.isHidden) {\r\n        for (var i = 0; i < results.cards.length; i++) {\r\n            results.cards[i].classList.remove('hidden');\r\n        }\r\n    } else {\r\n        for (var i = visibleCount; i < results.cards.length; i++) {\r\n            results.cards[i].classList.add('hidden');\r\n        }\r\n    }\r\n    results.isHidden = !results.isHidden;\r\n    expandAllCards();\r\n}\r\nfunction expandCard(card) {\r\n    var contentBox = card.querySelector('.results-card__text');\r\n    var text = contentBox.textContent;\r\n    var textArr = text.split(' ');\r\n    var resultText = '';\r\n    \r\n    var span = document.createElement('span');\r\n    for (var k = 0; k < textArr.length; k++) {\r\n        resultText += textArr[k] + ' ';\r\n        contentBox.innerHTML = '';\r\n        span.textContent = resultText;\r\n        \r\n        contentBox.appendChild(span);\r\n        if (span.getClientRects().length >= 6) {\r\n            console.log(true);\r\n            var cuttedText = textArr.slice(0, k - 2).join(' ') + ' ...';\r\n            span.textContent = cuttedText;\r\n            contentBox.appendChild(span);\r\n            card.classList.add('closed');\r\n            card.setAttribute('data-cutted-text', cuttedText);\r\n            break;\r\n        }/*  else {\r\n            card.classList.remove('closed');\r\n            card.classList.remove('opened');\r\n            card.removeAttribute('data-cutted-text');\r\n        } */\r\n    }\r\n    \r\n}\r\nfunction expandAllCards() {\r\n    for (var i = 0; i < results.cards.length; i++) {\r\n        expandCard(results.cards[i]);\r\n    }\r\n}\r\nfunction rollUpCard(card) {\r\n\r\n}\r\nfunction rollUpAllCards() {\r\n    for (var i = 0; i < results.cards.length; i++) {\r\n        rollUpCard(results.cards[i]);\r\n    }\r\n}\r\nfunction cardContentHandler(card) {\r\n    if (card.classList.contains('closed')) {\r\n        expandCard(card);\r\n    } else if (card.classList.contains('closed')) {\r\n        rollUpCard(card);\r\n    }\r\n}\r\nif (window.innerWidth < 768) {\r\n    var showResults = showOrHideMoreResults.bind(null, results.visibleCount);\r\n    results.btn.addEventListener('click', showResults);\r\n    showOrHideMoreResults(2);\r\n    expandAllCards();\r\n    for (var i = 0; i < results.cards.length; i++) {\r\n        var cardHandler = cardContentHandler.bind(null, cardHandler);\r\n        results.cards[i].addEventListener('click', cardHandler);\r\n    }\r\n}\r\n\r\nfunction tooltipsHandler() {\r\n    // var text = tooltips[controls.currentPage];\r\n    // var textArr = text.split(' ');\r\n    var resultText = '';\r\n\r\n    if (window.innerWidth < 767) {\r\n        var span = document.createElement('span');\r\n        for (var i = 0; i < textArr.length; i++) {\r\n            resultText += textArr[i] + ' ';\r\n            tooltipElem.innerHTML = '';\r\n            span.textContent = resultText;\r\n            tooltipElem.appendChild(span);\r\n            if (span.getClientRects().length >= 3) {\r\n                var cuttedText = textArr.slice(0, i - 1).join(' ') + ' ...';\r\n                span.textContent = cuttedText;\r\n                tooltipElem.appendChild(span);\r\n                tooltipElem.classList.add('closed');\r\n                tooltipElem.setAttribute('data-cutted-text', cuttedText);\r\n                break;\r\n            } else {\r\n                tooltipElem.classList.remove('closed');\r\n                tooltipElem.classList.remove('opened');\r\n                tooltipElem.removeAttribute('data-cutted-text');\r\n            }\r\n        }\r\n    } else {\r\n        tooltipElem.textContent = tooltips[controls.currentPage];\r\n    }\r\n}"],"file":"../main.min.js"}