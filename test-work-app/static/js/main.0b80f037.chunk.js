(this["webpackJsonptest-work-app"]=this["webpackJsonptest-work-app"]||[]).push([[0],{27:function(e,t,n){},28:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(13),s=n.n(r),u=(n(27),n(28),n(12)),i=n(8),o=n(7),l=n.n(o),j=n(10),b=n(11),d=n(5),p="ISSUES/SET_USERNAME",O="ISSUES/SET_REPO",h="ISSUES/FETCH_ISSUES",f="ISSUES/SET_ISSUES",m="ISSUES/LOADING_START",g="ISSUES/LOADING_END",x="ISSUES/SET_COUNT",S="ISSUES/SET_PAGE",v={loading:!1,list:null,error:null,totalCount:null,username:"",repo:"",page:null},y=n(22),E=n(19),N=l.a.mark(_),w=Object(y.a)(),C=Object(b.combineReducers)({issues:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(d.a)(Object(d.a)({},e),{},{username:t.payload});case O:return Object(d.a)(Object(d.a)({},e),{},{repo:t.payload});case f:return Object(d.a)(Object(d.a)({},e),{},{list:t.payload});case m:return Object(d.a)(Object(d.a)({},e),{},{loading:!0});case g:return Object(d.a)(Object(d.a)({},e),{},{loading:!1});case x:return Object(d.a)(Object(d.a)({},e),{},{totalCount:t.payload});case S:return Object(d.a)(Object(d.a)({},e),{},{page:t.payload});default:return e}}});function _(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.a)([Object(j.d)(h,M)]);case 2:case"end":return e.stop()}}),N)}var I=Object(b.createStore)(C,Object(E.composeWithDevTools)(Object(b.applyMiddleware)(w)));w.run(_);var T=I,U=n(18),k=n(20),D=n(21),A=function(){function e(t){var n=this;Object(k.a)(this,e),this._url=t,this.fetchIssues=function(){var e=Object(U.a)(l.a.mark((function e(t,c,a){var r,s,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(n.url,"/repos/").concat(t,"/").concat(c,"/issues"),a&&(r+=n.getQueryString(a)),e.next=4,fetch(r);case 4:return s=e.sent,e.next=7,s.json();case 7:return u=e.sent,e.abrupt("return",u.map((function(e){return{title:e.title,url:e.html_url,number:e.number,createdAt:e.created_at}})));case 9:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),this.getFormattedData=function(e){return e.map((function(e){return{title:e.title,url:e.html_url,number:e.number,createdAt:e.created_at}}))},this.getIssuesCount=function(){var e=Object(U.a)(l.a.mark((function e(t,c,a){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=a||"open",e.next=3,fetch("".concat(n.url,"/search/issues?q=repo:").concat(t,"/").concat(c,"%20is:issue+state:").concat(a));case 3:return r=e.sent,e.next=6,r.json().then((function(e){return e.total_count}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),this.getQueryString=function(e){var t="?";return e.perPage&&(t+="per_page=".concat(e.perPage,"&")),e.page&&(t+="page=".concat(e.page,"&")),e.state&&(t+="state=".concat(e.state,"&")),t=t.slice(0,t.length-1)}}return Object(D.a)(e,[{key:"url",get:function(){return this._url}}]),e}(),P=l.a.mark(M),F=new A("https://api.github.com");function M(){var e,t,n,c;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(!0),e=[T.getState().issues.username,T.getState().issues.repo],t=e[0],n=e[1],a.next=4,Object(j.c)({type:m});case 4:return a.next=6,Object(j.b)(F.fetchIssues,t,n);case 6:return c=a.sent,a.next=9,Object(j.c)({type:f,payload:c});case 9:return console.log(c),a.next=12,Object(j.c)({type:g});case 12:case"end":return a.stop()}}),P)}var L=n(3),R=function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(u.a)(r,2),o=s[0],l=s[1],j=Object(c.useState)(10),b=Object(u.a)(j,2),d=b[0],f=b[1],m=Object(i.c)((function(e){return e.issues.loading})),g=Object(i.b)(),x=function(e){return e.trim().toLowerCase()};return Object(L.jsx)("div",{className:"search-form",children:Object(L.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=x(n),c=x(o);g(function(e){return{type:p,payload:e}}(t)),g(function(e){return{type:O,payload:e}}(c)),g({type:h})},children:[Object(L.jsxs)("div",{className:"col",children:[Object(L.jsxs)("label",{className:"input-field",children:[Object(L.jsx)("span",{children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f: "}),Object(L.jsx)("input",{type:"text",name:"username",value:n,onChange:function(e){a(e.target.value)},disabled:m})]}),Object(L.jsxs)("label",{className:"input-field",children:[Object(L.jsx)("span",{children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f: "}),Object(L.jsx)("input",{type:"text",name:"repo",value:o,onChange:function(e){l(e.target.value)},disabled:m})]}),Object(L.jsx)("button",{type:"submit",disabled:m,children:"\u041f\u043e\u0438\u0441\u043a"})]}),Object(L.jsx)("div",{className:"input-field select-field",children:Object(L.jsxs)("label",{children:[Object(L.jsx)("span",{children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0435\u043c\u044b\u0445 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0439"}),Object(L.jsxs)("select",{value:d,onChange:function(e){f(+e.target.value)},children:[Object(L.jsx)("option",{value:"10",children:"10"}),Object(L.jsx)("option",{value:"30",children:"30"}),Object(L.jsx)("option",{value:"50",children:"50"})]})]})})]})})},G=function(e){return 1===e.toString().length?"0".concat(e.toString()):e},B=function(e){return"".concat(function(e){var t=new Date(e);return"".concat(G(t.getDate()),".").concat(G(t.getMonth()),".").concat(t.getFullYear())}(e)," ").concat(function(e){var t=new Date(e);return"".concat(G(t.getHours()),":").concat(G(t.getMinutes()),":").concat(G(t.getSeconds()))}(e))},H=function(e){var t=e.title,n=e.createdAt,c=e.number,a=e.url,r=B(n);return Object(L.jsxs)("div",{className:"issue-item",children:[Object(L.jsxs)("div",{className:"issue-item_box",children:[Object(L.jsx)("a",{href:a,children:t}),Object(L.jsxs)("span",{children:["\u0421\u043e\u0437\u0434\u0430\u043d\u043e: ",r]})]}),Object(L.jsxs)("div",{className:"issue-item_box",children:["\u041d\u043e\u043c\u0435\u0440 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f: ",c]})]})},J=function(e){for(var t=e.amountElems,n=e.perPage,c=e.onChange,a=e.active,r=t?Math.ceil(t/n):0,s=[],u=1;u<=r;u++)s.push(u);return Object(L.jsx)("ul",{className:"pagination",children:s.map((function(e){return Object(L.jsx)("li",{className:a===e?"active":void 0,children:Object(L.jsx)("a",{href:e.toString(),onClick:function(t){!function(e,t){e.preventDefault(),c(t)}(t,e)},children:e})},e)}))})},Q=function(){var e=Object(i.c)((function(e){return e.issues})),t=Object(c.useState)(1),n=Object(u.a)(t,2),a=n[0],r=n[1],s=(Object(i.b)(),Object(L.jsx)("p",{className:"text-center",children:"\u0417\u0434\u0435\u0441\u044c \u0434\u0430\u043d\u043d\u044b\u0445 \u043d\u0435\u0442 :("})),o=e.list&&e.totalCount&&e.totalCount>10;return Object(L.jsxs)("div",{className:"container-medium",children:[Object(L.jsx)("div",{className:"issue-list",children:e.list?e.list.map((function(e){return Object(c.createElement)(H,Object(d.a)(Object(d.a)({},e),{},{key:e.number}))})):e.loading?Object(L.jsx)("p",{className:"text-center",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}):s}),o&&Object(L.jsx)(J,{amountElems:e.totalCount,perPage:10,onChange:function(e){r(e)},active:a})]})},q=function(){var e=Object(i.c)((function(e){return e.issues.error}));return Object(c.useEffect)((function(){console.log(e)}),[e]),Object(L.jsxs)("div",{className:"container",children:[Object(L.jsx)("header",{className:"header",children:"header"}),Object(L.jsx)(R,{}),Object(L.jsx)(Q,{})]})},W=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,36)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};s.a.render(Object(L.jsx)(a.a.StrictMode,{children:Object(L.jsx)(i.a,{store:T,children:Object(L.jsx)(q,{})})}),document.getElementById("root")),W()}},[[35,1,2]]]);
//# sourceMappingURL=main.0b80f037.chunk.js.map