{"version":3,"names":[],"mappings":"","sources":["main.js"],"sourcesContent":["'use strict';\r\nclass Quiz {\r\n    constructor({slider}) {\r\n        this.selector = '.quiz';\r\n        this.el = document.querySelector(this.selector);\r\n        this.slider = slider;\r\n        this.data = {};\r\n        this.pages = this.el.querySelectorAll('.quiz__page');\r\n        this.pageCount = this.pages.length;\r\n        this.progress = {\r\n            current: 0,\r\n            step: 100 / this.pageCount,\r\n            elem: document.querySelector('.progress-bar'),\r\n            line: document.querySelector('.progress-bar .progress-bar__line'),\r\n            lineCurrent: document.querySelector('.progress-bar .progress-bar__ready'),\r\n        };\r\n        this.setup();\r\n    }\r\n    setProgress() {\r\n        this.progress.current += this.progress.step;\r\n        console.log(this.progress.current);\r\n    }\r\n    setup() {\r\n        const quiz = this;\r\n        document.querySelector('.quiz-actions__next').addEventListener('click', function(e) {quiz.slider.go( '+' );});\r\n        document.querySelector('.quiz-actions__prev').addEventListener('click', function(e) {quiz.slider.go( '-' );});\r\n        quiz.slider.on('move', function(next, prev) {\r\n            if (quiz.slider.index === quiz.slider.length - 1) {\r\n                document.querySelector('.quiz-actions').style.display = 'none';\r\n            }\r\n            if (next > prev) {\r\n                quiz.setProgress();\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n\r\nclass Modal {\r\n    constructor({selector, onFirstOpen}) {\r\n        this.selector = selector;\r\n        this.triggers = document.querySelectorAll('.call-modal');\r\n        this.el = document.querySelector(selector);\r\n        this.closeBtn = this.el.querySelector('.modal__close');\r\n        this.opened = false;\r\n        this.onFirstOpen = onFirstOpen;\r\n        this.setup();\r\n    }\r\n    showModal() {\r\n        this.el.classList.add('active');\r\n        document.querySelector('.wrapper').classList.add('blured');\r\n    }\r\n    hideModal() {\r\n        this.el.classList.remove('active');\r\n        document.querySelector('.wrapper').classList.remove('blured');\r\n    }\r\n    showingHandler() {\r\n        if (this.el.classList.contains('active')) {\r\n            this.hideModal();\r\n        } else {\r\n            this.showModal();\r\n        }\r\n    }\r\n    setup() {\r\n        this.closeBtn.addEventListener('click', (e) => {\r\n            this.hideModal();\r\n        });\r\n        this.triggers.forEach((el) => {\r\n            el.addEventListener('click', (e) => {\r\n                this.showingHandler();\r\n                if (!this.opened) {\r\n                    this.onFirstOpen();\r\n                    this.opened = true;\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n    // const quizSlider = \r\n    const quiz = new Quiz({\r\n        slider: new Splide('.splide.quiz', {\r\n            arrows: false,\r\n            perPage: 1,\r\n            perMove: 1,\r\n            pagination: false,\r\n            drag: false,\r\n            gap: 120,\r\n            padding: 1,\r\n        })\r\n    });\r\n    const modal = new Modal({\r\n        selector: '.modal',\r\n        onFirstOpen() {\r\n            quiz.slider.mount();\r\n        }\r\n    });\r\n\r\n\r\n\r\n\r\n\r\n});"],"file":"../main.min.js"}