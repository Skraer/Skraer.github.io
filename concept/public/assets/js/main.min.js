'use strict';
class Quiz {
    constructor({slider}) {
        this.selector = '.quiz';
        this.el = document.querySelector(this.selector);
        this.slider = slider;
        this.data = {};
        this.pages = this.el.querySelectorAll('.quiz__page');
        this.pageCount = this.pages.length;
        this.progress = {
            current: 0,
            step: 100 / this.pageCount,
            elem: document.querySelector('.progress-bar'),
            line: document.querySelector('.progress-bar .progress-bar__line'),
            lineCurrent: document.querySelector('.progress-bar .progress-bar__ready'),
        };
        this.setup();
    }
    setProgress() {
        this.progress.current += this.progress.step;
        console.log(this.progress.current);
    }
    setup() {
        const quiz = this;
        document.querySelector('.quiz-actions__next').addEventListener('click', function(e) {quiz.slider.go( '+' );});
        document.querySelector('.quiz-actions__prev').addEventListener('click', function(e) {quiz.slider.go( '-' );});
        quiz.slider.on('move', function(next, prev) {
            if (quiz.slider.index === quiz.slider.length - 1) {
                document.querySelector('.quiz-actions').style.display = 'none';
            }
            if (next > prev) {
                quiz.setProgress();
            }
        });
    }

}

class Modal {
    constructor({selector, onFirstOpen}) {
        this.selector = selector;
        this.triggers = document.querySelectorAll('.call-modal');
        this.el = document.querySelector(selector);
        this.closeBtn = this.el.querySelector('.modal__close');
        this.opened = false;
        this.onFirstOpen = onFirstOpen;
        this.setup();
    }
    showModal() {
        this.el.classList.add('active');
        document.querySelector('.wrapper').classList.add('blured');
    }
    hideModal() {
        this.el.classList.remove('active');
        document.querySelector('.wrapper').classList.remove('blured');
    }
    showingHandler() {
        if (this.el.classList.contains('active')) {
            this.hideModal();
        } else {
            this.showModal();
        }
    }
    setup() {
        this.closeBtn.addEventListener('click', (e) => {
            this.hideModal();
        });
        this.triggers.forEach((el) => {
            el.addEventListener('click', (e) => {
                this.showingHandler();
                if (!this.opened) {
                    this.onFirstOpen();
                    this.opened = true;
                }
            });
        });
    }
}

document.addEventListener('DOMContentLoaded', function() {
    // const quizSlider = 
    const quiz = new Quiz({
        slider: new Splide('.splide.quiz', {
            arrows: false,
            perPage: 1,
            perMove: 1,
            pagination: false,
            drag: false,
            gap: 120,
            padding: 1,
        })
    });
    const modal = new Modal({
        selector: '.modal',
        onFirstOpen() {
            quiz.slider.mount();
        }
    });





});
//# sourceMappingURL=maps/main.min.js.map
