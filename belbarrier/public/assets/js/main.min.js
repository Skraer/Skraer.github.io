"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var GateForm=function(){function e(t,n){var a=n.onSubmit;_classCallCheck(this,e),this.el=document.querySelector(t),this.btn=this.el.querySelector(".gate-form__submit"),this.onSubmit=a||function(){},this.setup()}return _createClass(e,[{key:"getFormData",value:function(){var e=this.el.querySelectorAll("input"),t={},n=!0;return e.forEach((function(e){var n=e.getAttribute("name");"checkbox"!==e.getAttribute("type")&&"radio"!==e.getAttribute("type")||!e.checked?("number"===e.getAttribute("type")||"text"===e.getAttribute("type"))&&e.value.length>0&&(t[n]=e.value):t[n]=e.value})),e.forEach((function(e){var a=e.getAttribute("name");t[a]||"checkbox"===e.getAttribute("type")||(n=!1)})),!!n&&t}},{key:"getInputs",value:function(e){var t=[];for(var n in e){var a=document.createElement("input");a.setAttribute("type","hidden"),a.setAttribute("name",n),a.setAttribute("value",e[n]),t.push(a)}return t}},{key:"setup",value:function(){var e=this;this.el.addEventListener("submit",(function(t){t.preventDefault();var n=e.getFormData(),a=n?e.getInputs(n):null;a?(a.forEach((function(e){document.querySelector("#ownForm form").appendChild(e)})),e.onSubmit()):alert("Выбраны не все значения!")}))}}]),e}(),Modal=function(){function e(t){_classCallCheck(this,e),this.selector=t,this.el=document.querySelector(this.selector),this.el&&(this.overlay=this.el.querySelector(".modal__overlay"),this.closeBtn=this.el.querySelector(".modal__close"),this.setup())}return _createClass(e,[{key:"showModal",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t?this.el.classList.add("active"):(this.el.classList.remove("hiding"),this.el.classList.add("active"),this.el.classList.add("showing"),setTimeout((function(){e.el.classList.remove("showing")}),250)),document.body.classList.add("lock")}},{key:"hideModal",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t?this.el.classList.remove("active"):(this.el.classList.remove("showing"),this.el.classList.add("hiding"),setTimeout((function(){e.el.classList.remove("active"),e.el.classList.remove("hiding")}),250)),document.body.classList.remove("lock")}},{key:"showingHandler",value:function(){this.el.classList.contains("active")?this.hideModal():this.showModal()}},{key:"setup",value:function(){var e=this;this.closeBtn.addEventListener("click",(function(t){e.hideModal()})),this.overlay.addEventListener("mousedown",(function(t){t.target===e.overlay&&e.hideModal()}))}}]),e}();function sendForm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t=t||function(){},event.preventDefault(),validateForm(e)){alert("Данные отправлены");var n=new XMLHttpRequest,a=serialize(e);console.log(a),n.open("POST","./mail.php"),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.onreadystatechange=function(){4==n.readyState&&200==n.status&&(e.reset(),t(),alert("Данные отправлены"))},n.send(a)}else alert("Введите корректные данные")}function validateForm(e){var t=e.querySelector('input[name="tel"]'),n=e.querySelector('input[name="name"]'),a=!0;return t&&!t.value.match(/^((8|\+7)[\- ]?)?(\(?\d{3}\)?[\- ]?)?[\d\- ]{7,10}$/)&&(a=!1),n&&n.value.length<2&&(a=!1),a}function serialize(e){if(!e||"FORM"!==e.nodeName)return!1;var t,n,a=[];for(t=e.elements.length-1;t>=0;t-=1)if(""!==e.elements[t].name)switch(e.elements[t].nodeName){case"INPUT":switch(e.elements[t].type){case"text":case"tel":case"email":case"hidden":case"password":case"button":case"reset":case"submit":a.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value));break;case"checkbox":writeCommaCheckbox(e,t,a);break;case"radio":e.elements[t].checked&&a.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value))}break;case"file":break;case"TEXTAREA":a.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value));break;case"SELECT":switch(e.elements[t].type){case"select-one":a.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value));break;case"select-multiple":for(n=e.elements[t].options.length-1;n>=0;n-=1)e.elements[t].options[n].selected&&a.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].options[n].value))}break;case"BUTTON":switch(e.elements[t].type){case"reset":case"submit":case"button":a.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value))}}return a.join("&")}var ownModal=new Modal("#ownForm",{}),callModal=new Modal("#callMe",{}),ownGateForm=new GateForm(".own .gate-form",{onSubmit:function(){ownModal.showModal()}}),showModalCallBtn=document.querySelector("#showModalCall");showModalCallBtn.addEventListener("click",(function(){callModal.showModal()}));
//# sourceMappingURL=maps/main.min.js.map
