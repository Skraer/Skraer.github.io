{"version":3,"names":[],"mappings":"","sources":["main.js"],"sourcesContent":["// (function() {\r\n    var $labels = document.querySelectorAll('.calculator__cb-custom');\r\n    var $menuItems = document.querySelectorAll('.menu__item .menu__link');\r\n\r\n    var $mark = document.querySelector('#svgMapMark');\r\n    var $dots = document.querySelectorAll('.svg-map-dot');\r\n    var $regions = document.querySelectorAll('.svg-map-region');\r\n\r\n    var $citiesInfo = document.querySelectorAll('.dealer__info');\r\n    var dotsData = [];\r\n\r\n    var $burger = document.querySelector('#burger');\r\n    var $headerMenu = document.querySelector('#headerMenu');\r\n    var $body = document.body;\r\n\r\n    var $callPopupBtns = document.querySelectorAll('[data-call-popup]');\r\n    var $popupList = document.querySelectorAll('.popup');\r\n\r\n    var $header = document.querySelector('#header');\r\n    var $catalogTabs = document.querySelectorAll('.catalog__tabs .catalog__tab');\r\n    var $catalogContents = document.querySelectorAll('.catalog__contents .catalog__list');\r\n\r\n    var $cityList = document.querySelectorAll('.popup__city-link');\r\n\r\n    var currentCity = 'Москва';\r\n\r\n    var slider = new Splide( '#charsSlider', {\r\n        type: 'loop',\r\n        rewind: false,\r\n        arrows: false,\r\n        pagination: false,\r\n        autoplay: true,\r\n        interval: 4000,\r\n        pauseOnHover: false,\r\n        perMove: 1,\r\n        autoWidth: true,\r\n        gap: 20,\r\n        height: 400,\r\n        breakpoints: {\r\n            1439: {\r\n                height: 320\r\n            },\r\n            1024: {\r\n                height: 255\r\n            },\r\n            767: {\r\n                height: 200\r\n            }\r\n        }\r\n    });\r\n    slider.mount();\r\n\r\n    /* ОТКРЫТИЕ МОДАЛЬНОГО ОКНА \"ВАШ ГОРОД МОСКВА?\" */\r\n    showPopup('popupConfirmCity');\r\n    /* ==================== */\r\n\r\n    for (let i = 0; i < $labels.length; i++) {\r\n        $labels[i].onkeydown = function() {\r\n            if (event.key === 'Enter') {\r\n                let cb = document.querySelector('input[type=\"checkbox\"]#' + $labels[i].getAttribute('for'));\r\n                cb.checked = !cb.checked;\r\n            }\r\n        };\r\n    }\r\n\r\n    for (let i = 0; i < $menuItems.length; i++) {\r\n        var elem = $menuItems[i];\r\n        var handler = scrollHandler.bind(null, elem);\r\n        elem.addEventListener('click', handler);\r\n    }\r\n    function scrollHandler(elem) {\r\n        if ($burger.classList.contains('active')) {\r\n            closeMenu();\r\n        }\r\n        var href = elem.getAttribute('href').substr(1);\r\n        event.preventDefault();\r\n        document.getElementById(href).scrollIntoView({block: \"start\", behavior: \"smooth\"});\r\n    }\r\n\r\n    for (let i = 0; i < $dots.length; i++) {\r\n        var obj = {\r\n            x: parseInt($dots[i].getAttribute('cx')),\r\n            y: parseInt($dots[i].getAttribute('cy')),\r\n            r: parseInt($dots[i].getAttribute('r')),\r\n        };\r\n        dotsData.push(obj);\r\n        var setMarkFunc = setMark.bind(null, i);\r\n        $dots[i].addEventListener('click', setMarkFunc);\r\n        $regions[i].addEventListener('click', setMarkFunc);\r\n    }\r\n    if (window.innerWidth <=767) {\r\n        for (let i = 0; i < $dots.length; i++) {\r\n            var currentR = $dots[i].getAttribute('r');\r\n            $dots[i].setAttribute('r', currentR * 2);\r\n        }\r\n    }\r\n\r\n    setMark(0);\r\n    function setMark(ind) {\r\n        var offsetX = +$mark.getAttribute('width') / 2;\r\n        var offsetY = +$mark.getAttribute('height');\r\n        if ($dots[ind].classList !== undefined) {\r\n            for (let i = 0; i < $dots.length; i++) {\r\n                $dots[i].classList.remove('hidden');\r\n                $citiesInfo[i].classList.add('hidden');\r\n            }\r\n            $dots[ind].classList.add('hidden');\r\n            $citiesInfo[ind].classList.remove('hidden');\r\n            $mark.setAttribute('x', dotsData[ind].x - offsetX);\r\n            $mark.setAttribute('y', dotsData[ind].y - offsetY);   \r\n        } else {\r\n            for (let i = 0; i < $citiesInfo.length; i++) {\r\n                $citiesInfo[i].classList.add('hidden');\r\n            }\r\n            $citiesInfo[ind].classList.remove('hidden');\r\n            $mark.setAttribute('x', dotsData[ind].x - offsetX);\r\n            $mark.setAttribute('y', dotsData[ind].y - offsetY);   \r\n        }\r\n    }\r\n\r\n\r\n    $burger.addEventListener('click', function() {\r\n        if ($burger.classList.contains('active')) {\r\n            closeMenu();\r\n        } else {\r\n            openMenu();\r\n        }\r\n    });\r\n    function closeMenu() {\r\n        $burger.classList.remove('active');\r\n        $headerMenu.classList.remove('active');\r\n        $body.classList.remove('lock');\r\n    }\r\n    function openMenu() {\r\n        $burger.classList.add('active');\r\n        $headerMenu.classList.add('active');\r\n        $body.classList.add('lock');\r\n    }\r\n\r\n \r\n\r\n    for (let i = 0; i < $callPopupBtns.length; i++) {\r\n        let elem = $callPopupBtns[i];\r\n        $callPopupBtns[i].addEventListener('click', function() {\r\n            event.preventDefault();\r\n            showPopup(elem.getAttribute('data-call-popup'));\r\n        });\r\n    }\r\n    for (let i = 0; i < $popupList.length; i++) {\r\n        let elem = $popupList[i];\r\n        $popupList[i].addEventListener('click', function() {\r\n            if (event.target.classList.contains('popup') && event.target.classList.contains('active')) {\r\n                hidePopup(elem.id);\r\n            }\r\n        });\r\n    }\r\n    for (let i = 0; i < $cityList.length; i++) {\r\n        let elem = $cityList[i];\r\n        elem.addEventListener('click', function() {\r\n            event.preventDefault();\r\n            // currentCity = elem.textContent;\r\n            hidePopup('popupSelectCity');\r\n            setCity(elem.textContent);\r\n        });\r\n    }\r\n\r\n    function setCity(city) {\r\n        currentCity = city;\r\n        // hidePopup('#popupSelectCity');\r\n        let $geoLinks = document.querySelectorAll('.geo__link');\r\n        for (let i = 0; i < $geoLinks.length; i++) {\r\n            $geoLinks[i].textContent = currentCity;\r\n        }\r\n    }\r\n\r\n    function showPopup(id) {\r\n        var $popup = document.getElementById(id);\r\n        for (let i = 0; i < $popupList.length; i++) {\r\n            if (id !== $popupList[i].id  ) {\r\n                $popupList[i].classList.remove('active');\r\n                $popupList[i].classList.remove('fade-out');\r\n            }\r\n        }\r\n        $popup.classList.add('active');\r\n        $popup.classList.add('fade-in');\r\n        $body.classList.add('lock');\r\n    }\r\n    function hidePopup(id) {\r\n        var $popup = document.getElementById(id);\r\n        $popup.classList.remove('fade-in');\r\n        $popup.classList.add('fade-out');\r\n        function removing() {\r\n            $popup.classList.remove('active');\r\n            $popup.classList.remove('fade-out');\r\n            $body.classList.remove('lock');\r\n            $popup.removeEventListener('animationend', removing);\r\n        }\r\n        $popup.addEventListener('animationend', removing);\r\n    }\r\n\r\n    // var scrollPrev = 0;\r\n\r\n    window.addEventListener('scroll', function() {\r\n        if (document.documentElement.scrollTop > 99) {\r\n            $header.classList.add('fixed');\r\n        } else {\r\n            $header.classList.remove('fixed');\r\n        }\r\n    });\r\n\r\n\r\n    for (let i = 0; i < $catalogTabs.length; i++) {\r\n        var func = activateTabContent.bind(null, i);\r\n        $catalogTabs[i].addEventListener('click', func);\r\n    }\r\n\r\n    function activateTabContent(ind) {\r\n        for (let j = 0; j < $catalogContents.length; j++) {\r\n            $catalogTabs[j].classList.remove('active');\r\n            $catalogContents[j].classList.add('hidden');\r\n        }\r\n        $catalogTabs[ind].classList.add('active');\r\n        $catalogContents[ind].classList.remove('hidden');\r\n    }\r\n// })();"],"file":"../main.min.js"}