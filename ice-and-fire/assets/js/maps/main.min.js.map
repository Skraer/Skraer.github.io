{"version":3,"names":[],"mappings":"","sources":["main.js"],"sourcesContent":["function nodeExist(selector) {\r\n    return document.querySelector(selector) !== null;\r\n}\r\n\r\nclass Tabs {\r\n    constructor({tabSelector, onInit, withContent, initialTab}) {\r\n        this.selector = tabSelector;\r\n        this.tabs = document.querySelectorAll(tabSelector);\r\n        this.inputs = document.querySelectorAll(tabSelector + ' input');\r\n        this.initialTab = initialTab || 0;\r\n        this.contents = null;\r\n        this.withContent = withContent || false;\r\n        this.data = {\r\n            activeIdx: null,\r\n            activeValue: null\r\n        };\r\n        this.isInit = false;\r\n        this.onInit = onInit ? onInit.bind(this) : function(){return false};\r\n        this.setup();\r\n    }\r\n    resetTabs() {\r\n        this.tabs.forEach(function(el) {\r\n            el.classList.remove('active');\r\n        });\r\n    }\r\n    _onInit() {\r\n        if (this.onInit()) {\r\n            this.onInit();\r\n        }\r\n    }\r\n    setupContent() {\r\n        if (this.withContent) {\r\n            this.contents = document.querySelectorAll('[data-content-for-tab]');\r\n        }\r\n    }\r\n    resetContents() {\r\n        this.inputs.forEach(function(el) {\r\n            const name = el.getAttribute('value');\r\n            const content = document.querySelector('[data-content-for-tab=\"'+ name +'\"]');\r\n            content.classList.remove('active');\r\n        });\r\n    }\r\n    setContent(name) {\r\n        this.resetContents();\r\n        const content = document.querySelector('[data-content-for-tab=\"'+ name +'\"]');\r\n        content.classList.add('active');\r\n    }\r\n    setup() {\r\n        if (document.querySelector(this.selector) !== null) {\r\n            this.inputs.forEach((el, idx) => {\r\n                el.addEventListener('change', (e) => {\r\n                    this.data = {activeIdx:idx, activeValue:el.value};\r\n                    this.resetTabs();\r\n                    this.tabs[idx].classList.add('active');\r\n                    if (this.withContent) {\r\n                        this.setContent(el.getAttribute('value'));\r\n                    }\r\n                });\r\n            });\r\n            this.tabs[this.initialTab].classList.add('active');\r\n            this.inputs[this.initialTab].checked = true;\r\n            if (this.withContent) {this.setContent(this.inputs[this.initialTab].getAttribute('value'))}\r\n            this.isInit = true;\r\n            this._onInit();\r\n        }\r\n    }\r\n}\r\n\r\nclass MenuCatalog {\r\n    constructor({menuSelector}) {\r\n        this.menuSelector = menuSelector;\r\n        this.menuRoot = document.querySelector(menuSelector);\r\n        this.menuBtn = this.menuRoot.querySelector('a');\r\n        this.setup();\r\n    }\r\n    setup() {\r\n        if (this.menuRoot !== null) {\r\n            const root = this.menuRoot;\r\n            const btn = this.menuBtn;\r\n            const selector = this.menuSelector;\r\n\r\n            root.addEventListener('click', function(e) {\r\n                e.preventDefault();\r\n                if (e.target.closest('a') === btn) {\r\n                    root.classList.contains('active') ?\r\n                        root.classList.remove('active') :\r\n                        root.classList.add('active');\r\n                }\r\n\r\n            });\r\n            document.addEventListener('click', function(e) {\r\n                if (e.target.closest(selector) !== root) {\r\n                    root.classList.remove('active');\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nclass ProductCards {\r\n    constructor({cardSelector}) {\r\n        this.cardSelector = cardSelector;\r\n        this.cardElems = document.querySelectorAll(this.cardSelector);\r\n        this.setup();\r\n    }\r\n    addToCartHandler() {\r\n\r\n    }\r\n    setup() {\r\n        if (this.cardElems.length > 0) {\r\n            this.cardElems.forEach((el, idx) => {\r\n                const addBtn = el.querySelector(this.cardSelector + '__add');\r\n                addBtn.onclick = () => {el.classList.toggle('in-cart')};\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nclass SearchField {\r\n    constructor({formSelector}) {\r\n        this.formSelector = formSelector;\r\n        this.form = document.querySelector(formSelector);\r\n        this.input = document.querySelector(formSelector + ' input');\r\n        this.btn = document.querySelector(formSelector + ' button');\r\n        this.isInit = false;\r\n        this.state = null;\r\n        this.inputPlaceholder = null;\r\n        this.text = '';\r\n        this.setup();\r\n    }\r\n    openForm() {\r\n        this.form.classList.remove('close');\r\n        this.form.classList.add('open');\r\n    }\r\n    closeForm() {\r\n        this.form.classList.remove('open');\r\n        this.form.classList.add('close');\r\n    }\r\n    btnHandler(e) {\r\n        if (!this.text) {\r\n            e.preventDefault();\r\n            if (this.state === 'open') {\r\n                this.state = 'close';\r\n                this.closeForm();\r\n            } else if (this.state === 'close') {\r\n                this.state = 'open';\r\n                this.openForm();\r\n            }\r\n        } else {\r\n            alert('Имитация поиска товара по запросу: ' + this.text);\r\n            this.form.submit();\r\n        }\r\n    }\r\n    inputHandler(e) {\r\n        this.text = e.target.value;\r\n        // if (!this.text && e.key === 'Enter') {\r\n        //     e.preventDefault();\r\n        // } else if (this.text && e.key === 'Enter') {\r\n        //     alert('Имитация поиска товара по запросу: ' + this.text);\r\n        // }\r\n    }\r\n    setup() {\r\n        if (this.form && this.input && this.btn) {\r\n            this.state = 'close';\r\n            this.inputPlaceholder = this.input.getAttribute('placeholder');\r\n            const btnHandler = this.btnHandler.bind(this);\r\n            const inputHandler = this.inputHandler.bind(this);\r\n            // const formHandler = this.formHandler.bind(this);\r\n            this.btn.addEventListener('click', function(e) {btnHandler(e)});\r\n            this.input.addEventListener('input', function(e) {inputHandler(e)});\r\n            this.form.addEventListener('submit', (e) => {\r\n                if (!this.text) {\r\n                    e.preventDefault();\r\n                } else {\r\n                    alert('Имитация поиска товара по запросу: ' + this.text);\r\n                }\r\n            });\r\n\r\n            this.isInit = true;\r\n        } else {\r\n            console.error('SearchField not inited. Some of elements not found');\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n    const navMenuLinks = document.querySelectorAll('.nav-list .nav-list__item a');\r\n    navMenuLinks.forEach(function(el) {\r\n        if (window.location.pathname.indexOf(el.getAttribute('href')) > -1) {\r\n            el.closest('.nav-list__item').classList.add('current');\r\n            document.body.classList.add('index-page');  // FIXME !!!!!!!!!!!!REMOVE ON PROD!!!!!!!!!!!!!!! \r\n        } else if ((window.location.pathname === '' || window.location.pathname === '/') && el.getAttribute('href').indexOf('index') > -1) {\r\n            el.closest('.nav-list__item').classList.add('current');\r\n            document.body.classList.add('index-page');  // FIXME !!!!!!!!!!!!REMOVE ON PROD!!!!!!!!!!!!!!! \r\n        }\r\n    });\r\n\r\n    const headerSearchField = new SearchField({\r\n        formSelector: '.header .actions__search'\r\n    });\r\n\r\n    const productsTabs = new Tabs({\r\n        tabSelector: '.products__category-tab',\r\n    });\r\n    const productsGridTabs = new Tabs({tabSelector: '.products__type-tab'});\r\n\r\n    const productCardInfoTabs = new Tabs({\r\n        tabSelector: '.product__info-tab',\r\n        withContent: true,\r\n        // contentBoxSelector: '.product__info-content-box'\r\n    });\r\n    \r\n    const headerCatalog = new MenuCatalog({\r\n        menuSelector: '.header__menu'\r\n    });\r\n\r\n    const productCards = new ProductCards({\r\n        cardSelector: '.product-card'\r\n    });\r\n    \r\n    if (nodeExist('.brands__slider.splide')) {\r\n        const brandsSlider = new Splide('.brands__slider.splide', {\r\n            type: 'loop',\r\n            perPage: 4,\r\n            perMove: 1,\r\n            pagination: false\r\n        }).mount();\r\n    }\r\n\r\n    if (nodeExist('.product__view-slider.splide')) {\r\n        const productCardThumbs = new Splide( '.product__view-slider.splide', {\r\n            type: 'loop',\r\n            perPage: 3,\r\n            perMove: 1,\r\n            height: 380,\r\n            gap         : 8,\r\n            cover       : false,\r\n            isNavigation: true,\r\n            pagination: false,\r\n            focus       : 'center',\r\n            direction: 'ttb',\r\n        }).mount();\r\n        const productCardPrimary = new Splide( '.product__view-img-wrapper', {\r\n            type       : 'fade',\r\n            pagination : false,\r\n            arrows     : false,\r\n            cover      : false,\r\n            drag: false,\r\n        });\r\n        productCardPrimary.sync( productCardThumbs ).mount();\r\n    }\r\n});\r\n"],"file":"../main.min.js"}