{"version":3,"names":[],"mappings":"","sources":["main.js"],"sourcesContent":["// const playBtn = document.querySelector('.play-video');\r\n\r\n// playBtn.addEventListener('click', function(e) {\r\n//     e.preventDefault();\r\n//     const parent = playBtn.parentElement;\r\n//     const src = playBtn.getAttribute('href');\r\n//     const iframe = document.createElement('iframe');\r\n//     parent.removeChild(playBtn);\r\n//     parent.appendChild(iframe);\r\n//     iframe.setAttribute('src', src + '?rel=0&modestbranding=1&autohide=1&mute=1&showinfo=0&controls=1&autoplay=1');\r\n//     iframe.setAttribute('frameborder', '0');\r\n//     iframe.setAttribute('allow', 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture');\r\n//     iframe.setAttribute('allowfullscreen', null);\r\n// });\r\n\r\nvar inputTel = document.getElementById('inputTel');\r\n// var maskOptions = {\r\n//   mask: '+{7}(000)000-00-00',\r\n//   lazy: false\r\n// };\r\n// var mask = IMask(inputTel, maskOptions);\r\n\r\ninputTel.addEventListener('mouseover', function () {\r\n    mask = IMask(this, {\r\n        mask: '+{7} (000) 000 00 00',\r\n        overwrite: true,\r\n        lazy: false,\r\n        autofix: true\r\n    });\r\n});\r\ninputTel.addEventListener('mouseleave', function () {\r\n    if (mask.masked.unmaskedValue.length <= 1) {\r\n        mask.masked.reset();\r\n        this.value = '';\r\n    }\r\n});\r\n\r\n\r\nfunction sendForm(form, onSuccess) {\r\n    onSuccess = onSuccess || function(){};\r\n    event.preventDefault();\r\n    if (validateForm(form)) {\r\n        var xhr = new XMLHttpRequest();\r\n        var body = serialize(form);\r\n        xhr.open('POST', './mail.php');\r\n        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\r\n        xhr.onreadystatechange = function() {\r\n            if (xhr.readyState == 4 && xhr.status == 200) {\r\n                form.reset();\r\n                // showSuccessWindow();\r\n                onSuccess();\r\n                alert('Данные отправлены');\r\n                // setTimeout(function() {\r\n                //     window.location.href = '/thanks.html';\r\n                // }, 1500);\r\n            }\r\n        };\r\n        xhr.send(body);\r\n    } else {\r\n        alert('Введите корректные данные');\r\n        // form.reset();\r\n    }\r\n}\r\nfunction validateForm(form) {\r\n\tvar regTel = /^((8|\\+7)[\\- ]?)?(\\(?\\d{3}\\)?[\\- ]?)?[\\d\\- ]{7,10}$/;\r\n\tvar inputTel = form.querySelector('input[name=\"tel\"]');\r\n    var inputName = form.querySelector('input[name=\"name\"]');\r\n    if (inputTel.value.match(regTel) && inputName.value.length > 2) return true;\r\n    else return false;\r\n}\r\nfunction serialize(form) {\r\n\tif (!form || form.nodeName !== \"FORM\") {\r\n\t\treturn false;\r\n\t}\r\n\tvar i, j, q = [];\r\n\tfor (i = form.elements.length - 1; i >= 0; i = i - 1) {\r\n\t\tif (form.elements[i].name === \"\") {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tswitch (form.elements[i].nodeName) {\r\n\t\t\tcase 'INPUT':\r\n\t\t\t\tswitch (form.elements[i].type) {\r\n\t\t\t\t\tcase 'text':\r\n\t\t\t\t\tcase 'tel':\r\n\t\t\t\t\tcase 'email':\r\n\t\t\t\t\tcase 'hidden':\r\n\t\t\t\t\tcase 'password':\r\n\t\t\t\t\tcase 'button':\r\n\t\t\t\t\tcase 'reset':\r\n\t\t\t\t\tcase 'submit':\r\n\t\t\t\t\t\tq.push(form.elements[i].name + \"=\" + encodeURIComponent(form.elements[i].value));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'checkbox':\r\n\t\t\t\t\t\twriteCommaCheckbox(form, i, q);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'radio':\r\n\t\t\t\t\t\tif (form.elements[i].checked) {\r\n\t\t\t\t\t\t\tq.push(form.elements[i].name + \"=\" + encodeURIComponent(form.elements[i].value));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'file':\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'TEXTAREA':\r\n\t\t\t\tq.push(form.elements[i].name + \"=\" + encodeURIComponent(form.elements[i].value));\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'SELECT':\r\n\t\t\t\tswitch (form.elements[i].type) {\r\n\t\t\t\t\tcase 'select-one':\r\n\t\t\t\t\t\tq.push(form.elements[i].name + \"=\" + encodeURIComponent(form.elements[i].value));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'select-multiple':\r\n\t\t\t\t\t\tfor (j = form.elements[i].options.length - 1; j >= 0; j = j - 1) {\r\n\t\t\t\t\t\t\tif (form.elements[i].options[j].selected) {\r\n\t\t\t\t\t\t\t\tq.push(form.elements[i].name + \"=\" + encodeURIComponent(form.elements[i].options[j].value));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'BUTTON':\r\n\t\t\t\tswitch (form.elements[i].type) {\r\n\t\t\t\t\tcase 'reset':\r\n\t\t\t\t\tcase 'submit':\r\n\t\t\t\t\tcase 'button':\r\n\t\t\t\t\t\tq.push(form.elements[i].name + \"=\" + encodeURIComponent(form.elements[i].value));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\treturn q.join(\"&\");\r\n}"],"file":"../main.min.js"}